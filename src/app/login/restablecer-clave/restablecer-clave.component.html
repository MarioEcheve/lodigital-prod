<div *ngIf="!tokenValido" class="contenedor ui-bg-cover d-flex justify-content-center align-items-center" style="background-image: url('assets/img/bg/login.jpg')">
  <div class="card mt-5 mb-5" style="width: 400px; padding: 20px;border-radius: 3px; margin-left: 20px; margin-right: 20px;">
    <div class="mb-4 mt-2">          
      <img style="display:block; margin:auto;" src="/assets/img/login.png"/>          
    </div>
    <div class="mb-3">
      <div class="text-center text-danger mt-2 mb-5">El enlace a expirado!!!</div>
      <!-- <div class="mt-2">            
        <button type="button" class="btn btn-primary btn-block">Cerrar</button>
      </div> -->
    </div>      
    <div class="card-footer">
      <div class="text-center text-muted" style="font-size: 11px;">
        Sisteman desarrollado por <a href="https://www.linksystem.cl" target="_blank">LinkSystem</a> Spa.<br>
        Versión 2021         
      </div>
    </div> 
  </div>
</div>

<div *ngIf="tokenValido" class="contenedor ui-bg-cover d-flex justify-content-center align-items-center" style="background-image: url('assets/img/bg/login.jpg')">
  <div class="card mt-5 mb-5" style="max-width: 400px; padding: 20px;border-radius: 3px; margin-left: 20px; margin-right: 20px;">  
    <div class="mb-4 mt-2">          
      <img style="display:block; margin:auto;" src="/assets/img/accesologo.jpg"/>          
    </div>
    <form [formGroup]="reestablecerForm" class="mb-3">
      <div class="mb-3">
        Bienvenido a <strong>LODigital</strong>. Ingrese todos los datos para restablecer contraseña de acceso.  
      </div>
      <div class="form-group">
        <label class="form-label">Código Provisorio</label>            
        <input type="text" class="form-control" formControlName="codigo" required>                
      </div>
      <div class="form-group">
        <label class="form-label">Nueva Contraseña</label>            
        <input type="password" class="form-control" minlength="8" maxlength="12" formControlName="password" required>
        <small class="form-text text-muted">La contraseña debe contener entre 8 y 12 caracteres. Se recomienda incorporar letras mayúsculas y minúsculas, ademas de caracteres especiales.</small>        
      </div>
      <div class="form-group">
        <label class="form-label">Repita la Contraseña</label>            
        <input type="password" class="form-control" minlength="8" maxlength="12" formControlName="confirmPassword" required>        
        <label
          class="text-danger"
          *ngIf="reestablecerForm.controls['confirmPassword'].hasError('NoPassswordMatch')">
          Las contraseña no coinciden
        </label>
      </div>          
      <div class="mt-3">            
        <button type="button" (click)="reestablecerPassword()" class="btn btn-primary btn-block" [disabled]="reestablecerForm.invalid">Restablecer Contraseña</button>
        <button type="button" class="btn btn-default btn-block" (click)="goLogin()" >Cancelar</button>
      </div>
    </form>    
    <div class="card-footer">
      <div class="text-center text-muted" style="font-size: 11px;">
        Sisteman desarrollado por <a href="https://www.linksystem.cl" target="_blank">LinkSystem</a> Spa.<br>
        Versión 2021         
      </div>
    </div>      
  </div>
</div>
<block-ui [template]="pageBlockTemplate" class="block-ui-white"></block-ui>
<ng-template #pageBlockTemplate>
  <div class="block-ui-template">
    <div class="sk-folding-cube sk-primary"><div class="sk-cube1 sk-cube"></div><div class="sk-cube2 sk-cube"></div><div class="sk-cube4 sk-cube"></div><div class="sk-cube3 sk-cube"></div></div>
    <h5 class="text-center mb-0">Reestableciendo Contraseña...</h5>
  </div>
</ng-template>